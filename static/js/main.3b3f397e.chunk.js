(this.webpackJsonpspotify_application=this.webpackJsonpspotify_application||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/spotify_homepage_img.a7757dd1.jpg"},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),s=(a(92),a(93),a(15)),c=a(16),o=a(18),u=a(17),h=a(12),m=a.n(h),d=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.hash.split("#access_token=").pop().split("&")[0];if(console.log("access token here",t),t.length>0){localStorage.access_token=t;var a={headers:{Authorization:"Bearer ".concat(t)}};m.a.get("https://api.spotify.com/v1/me",a).then((function(e){var t=e.data.id;localStorage.id=t,console.log(t)})),setTimeout((function(){return e.props.history.push("/home")}),1e3)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Authentifiez-vous"),r.a.createElement("a",{href:"https://accounts.spotify.com/authorize?client_id=de2017d063ae4b7d87f7d52b9d8c7d31&response_type=token&scope=playlist-modify-public playlist-modify-private&redirect_uri=http://localhost:3000/auth"},"Me connecter"))}}]),a}(n.Component),p=a(38),f=a(172),y=a(175),v=a(173),g=a(174),b=a(183),E=a(182),k=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({searchActivated:!1,search:e.target.value})},n.state={search:"",searchActivated:!1,tracks:[],albums:[],artists:[]},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n}return Object(c.a)(a,[{key:"addSearch",value:function(){var e=this;this.setState({searchActivated:!0});var t=localStorage.access_token,a={headers:{Authorization:"Bearer ".concat(t)},params:{q:this.state.search,type:"track,album,artist"}};m.a.get("https://api.spotify.com/v1/search",a).then((function(t){console.log(t.data),e.setState({artists:t.data.artists.items,albums:t.data.albums.items,tracks:t.data.tracks.items})}))}},{key:"render",value:function(){var e=this.state.searchActivated;return e&&0!==this.state.search.length?e&&this.state.search.length>0?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{id:"outlined-basic",label:"Album, Titre ou Artiste ",value:this.state.search,onChange:this.handleChange,style:{marginRight:"20px"}}),r.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.addSearch.bind(this)},"Rechercher")),r.a.createElement("div",{style:{display:"flex",width:"100%",height:"80%",overflow:"auto",padding:"25px 0"}},r.a.createElement("div",{style:{height:"480px"}},r.a.createElement("h2",null,"Titres"),this.state.tracks.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(v.a,{textAlign:"center",key:t},r.a.createElement(g.a,{primary:e.name}))))}))),r.a.createElement("div",{style:{height:"480px"}},r.a.createElement("h2",null,"Album"),this.state.albums.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(v.a,{key:t},r.a.createElement(y.a,null,r.a.createElement(b.a,{alt:"album image",src:e.images[2].url})),r.a.createElement(g.a,{primary:e.name}))))})))))):void 0:r.a.createElement("div",{style:{position:"relative",textAlign:"center",margin:"auto"}},r.a.createElement(E.a,{id:"outlined-basic",label:"Album, Titre ou Artiste ",value:this.state.search,onChange:this.handleChange}),r.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.addSearch.bind(this)},"Rechercher"))}}]),a}(n.Component),C=a(50),S=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).searchImage=function(){var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e)},params:{q:n.state.description,type:"album",limit:3}};m.a.get("https://api.spotify.com/v1/search",t).then((function(e){console.log(e.data),n.setState({albums:e.data.albums.items[0].images[0].url}),alert(JSON.stringify(n.state.albums))}))},n.create=function(){var e=localStorage.access_token,t=localStorage.id;if(e&&t){var a={headers:{Authorization:"Bearer ".concat(e)}};m.a.post("https://api.spotify.com/v1/users/"+t+"/playlists",{name:n.state.name,description:n.state.description,images:[{KEY:"image_description",height:640,url:"".concat(JSON.stringify(n.state.albums)),width:640}]},a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},n.handleChange=function(e){var t;n.setState((t={},Object(C.a)(t,e.target.name,e.target.value),Object(C.a)(t,e.target.description,e.target.value),t))},n.state={name:"",description:"",albums:[]},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",margin:"100px auto"}},r.a.createElement(E.a,{id:"outlined-basic",label:"Nom de la playlist",name:"name",value:this.state.name,onChange:this.handleChange,style:{}}),r.a.createElement(E.a,{id:"outlined-basic",name:"description",label:"Image(Nom d'un album)",value:this.state.description,onChange:this.handleChange,style:{}}),r.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.searchImage},"Valider l'album"),r.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.create},"Cr\xe9er la playlist"))}}]),a}(n.Component),j=a(176),x=a(177),A=a(179),O=a(178),w=a(180),_=a(76),I=a.n(_),B=(a(114),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={playlists:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.access_token,a=localStorage.id;if(t&&a){var n={headers:{Authorization:"Bearer ".concat(t)}};m.a.get("https://api.spotify.com/v1/users/"+a+"/playlists",n).then((function(t){console.log(t.data.items),e.setState({playlists:t.data.items})}))}else this.props.history.push("/auth")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{margin:"2vh auto",color:"gold"}},"Bienvenue sur votre plateforme Spotify, vous \xeates bien connect\xe9"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",width:"100%",height:"600px"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"}},r.a.createElement(j.a,{cellHeight:180,style:{width:500,height:450}},r.a.createElement(x.a,{key:"Subheader",cols:2,style:{height:"auto"}},r.a.createElement(O.a,{component:"div"},"Playlists actuelles")),this.state.playlists.map((function(e,t){return r.a.createElement(x.a,{key:t},e.images[0]&&r.a.createElement("img",{src:e.images[0].url,alt:e.title}),r.a.createElement(A.a,{title:e.name,actionIcon:r.a.createElement(w.a,{"aria-label":"Voir titres",style:{color:"rgba(255, 255, 255, 0.54)"}},r.a.createElement(I.a,{onClick:function(){return window.location="/playlists?id="+e.id+"&artist="+e.name}}))}))})))),r.a.createElement("div",{style:{display:"flex",width:"20%",height:"600px"}},r.a.createElement(S,null)),r.a.createElement("div",{style:{display:"flex",width:"40%",height:"600px"}},r.a.createElement(k,null))))}}]),a}(n.Component)),z=a(52),L=a(10),T=a(51),N=a.n(T),P=a(77),M=a.n(P),R=a(171),q=a(181),D=a(45),J=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({research:e.target.value})},n.searchArtist=function(){var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e)},params:{q:n.state.research,type:"artist,track,album",limit:50}};m.a.get("https://api.spotify.com/v1/search",t).then((function(e){console.log(e.data),n.setState({tracks:e.data.tracks.items})}))},n.addTrack=function(e){console.log(e);var t=localStorage.access_token,a={headers:{Authorization:"Bearer ".concat(t)},params:{uris:e.uri}};m.a.post("https://api.spotify.com/v1/playlists/"+n.props.playListId+"/tracks",{},a).then((function(e){console.log(e),n.props.refreshAdd()})),console.log(e)},n.state={isCreatingPlaylitst:!1,research:"",albums:[],artists:[],tracks:[]},n}return Object(c.a)(a,[{key:"createNewPlaylist",value:function(){this.setState({isCreatingPlaylitst:!0})}},{key:"render",value:function(){var e=this;return this.state.isCreatingPlaylitst?r.a.createElement("div",{style:{alignItems:"center",textAlign:"center"}},r.a.createElement("form",{style:{position:"relative"}},r.a.createElement(E.a,{id:"standard-basic",label:"Artiste , musique ou album",type:"text",style:{width:"200px"},value:this.state.research,onChange:this.handleChange.bind(this)}),r.a.createElement(f.a,{type:"button",onClick:this.searchArtist.bind(this),variant:"contained",color:"primary",style:{position:"absolute",top:"50%",transform:"translateY(-50%)",marginLeft:"20px"}},"Rechercher")),r.a.createElement(q.a,{container:!0,spacing:2},r.a.createElement(q.a,{item:!0,xs:4}),r.a.createElement(q.a,{item:!0,xs:4},this.state.tracks.length>0?r.a.createElement(D.a,{variant:"h4",component:"h4"},"Tracks"):null,r.a.createElement(R.a,{component:"nav","aria-label":"main mailbox folders",style:{maxHeight:"200px",overflowY:"auto"}},this.state.tracks.map((function(t,a){return r.a.createElement(v.a,null,r.a.createElement(g.a,{primary:t.name}),r.a.createElement("button",{onClick:function(){return e.addTrack(t)}},"+"))})))),r.a.createElement(q.a,{item:!0,xs:4}))):r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(f.a,{variant:"contained",color:"primary",component:"span",style:{margin:"30px 0px"},onClick:this.createNewPlaylist.bind(this),startIcon:r.a.createElement(M.a,null)},"Upload")))}}]),a}(n.Component),W=a(78),Y=a.n(W),H=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).deleteIcon=function(){var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e),ContentType:"application/json"},data:{tracks:[{uri:n.props.track.uri}]}};m.a.delete("https://api.spotifty.com/v1/playlists/"+n.props.playListId+"/tracks",t).then((function(e){console.log(e),n.props.refreshSub()})).catch((function(e){return console.log(e)}))},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(w.a,{"aria-label":"delete",onClick:this.deleteIcon},r.a.createElement(Y.a,null))}}]),a}(n.Component),V=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).refreshSub=function(){var e=N.a.parse(n.props.location.search).id,t=n.state.musics.filter((function(t){return t!=e}));n.setState({musics:t})},n.refreshAdd=function(){var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e)}},a=N.a.parse(n.props.location.search);n.setState({playListId:a.id,artist:a.artist}),console.log("PARAMS",a),m.a.get("https://api.spotify.com/v1/playlists/"+a.id+"/tracks",t).then((function(e){console.log(e.data.items),console.log(e.data.items[0].track.artists[0].name),n.setState({musics:e.data.items})}))},n.state={musics:[],artist:"",playListId:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.refreshAdd(),this.refreshSub()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",{style:{color:"gold"}},this.state.artist),r.a.createElement("div",null,r.a.createElement(J,{playListId:this.state.playListId,refreshAdd:this.refreshAdd}),r.a.createElement("div",{style:{height:"500px",margin:"auto",textAlign:"left",width:"500px",overflow:"auto"}},this.state.musics.map((function(t,a){return r.a.createElement("div",{key:a,style:{margin:"auto"}},r.a.createElement("div",null,t.track.name,r.a.createElement(H,{playListId:e.state.playListId,track:t.track,refreshSub:e.refreshSub})))})))))}}]),a}(n.Component);var F=function(){return r.a.createElement(z.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement("ul",{style:{margin:"0"}},r.a.createElement("li",{style:{listStyleType:"none"}},r.a.createElement(z.b,{to:"/auth"},"Authentification")))),r.a.createElement(L.c,null,r.a.createElement(L.a,{path:"/auth",component:d}),r.a.createElement(L.a,{path:"/playlists",component:V}),r.a.createElement(L.a,{path:"/",component:B}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,a){e.exports=a(130)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.3b3f397e.chunk.js.map